<UserControl x:Class="PageLeaf.Views.CssEditorView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:controls="clr-namespace:PageLeaf.Views.Controls"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:PageLeaf.Views"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             d:DesignHeight="450"
             d:DesignWidth="300"
             mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Panel Toolbar -->
        <Border Grid.Row="0"
                Padding="5"
                BorderBrush="LightGray"
                BorderThickness="0,0,0,1">
            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                <Button Margin="0,0,10,0"
                        Command="{Binding ResetCommand}"
                        Style="{StaticResource IconButtonStyle}"
                        ToolTip="設定をリセット (ファイルから再読み込み)">
                    <StackPanel Orientation="Horizontal">
                        <Path Width="14"
                              Height="14"
                              Data="{StaticResource RefreshIconGeometry}"
                              Fill="{StaticResource PrimaryTextBrush}"
                              Stretch="Uniform" />
                    </StackPanel>
                </Button>
                <Button Command="{Binding SaveCssCommand}"
                        Style="{StaticResource IconButtonStyle}"
                        ToolTip="CSSを保存">
                    <Path Width="14"
                          Height="14"
                          Data="{StaticResource SaveIconGeometry}"
                          Fill="{StaticResource PrimaryTextBrush}"
                          Stretch="Uniform" />
                </Button>
            </StackPanel>
        </Border>

        <!-- Tab Container -->
        <TabControl Grid.Row="1">
            <!-- General Tab -->
            <TabItem Header="全体">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Style="{StaticResource FormContainerStyle}">
                        <Label Content="文字色:" Style="{StaticResource FormLabelStyle}" />
                        <controls:ColorInputControl ColorText="{Binding BodyTextColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    CommandParameter="BodyTextColor"
                                                    SelectColorCommand="{Binding SelectColorCommand}" />

                        <Label Content="背景色:" Style="{StaticResource FormLabelStyle}" />
                        <controls:ColorInputControl ColorText="{Binding BodyBackgroundColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    CommandParameter="BodyBackgroundColor"
                                                    SelectColorCommand="{Binding SelectColorCommand}" />

                        <Label Content="フォントサイズ:" Style="{StaticResource FormLabelStyle}" />
                        <controls:FontSizeEditorControl Unit="{Binding GlobalUnit}" Value="{Binding BodyFontSize, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                        <Label Content="共通単位:" Style="{StaticResource FormSectionLabelStyle}" />
                        <ComboBox ItemsSource="{Binding AvailableUnits}"
                                  SelectedItem="{Binding GlobalUnit, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                  Style="{StaticResource FormComboBoxStyle}" />
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Headings Tab -->
            <TabItem Header="見出し">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Style="{StaticResource FormContainerStyle}">
                        <Label Content="対象見出し:" Style="{StaticResource FormLabelStyle}" />
                        <ComboBox ItemsSource="{Binding AvailableHeadingLevels}"
                                  SelectedItem="{Binding SelectedHeadingLevel, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                  Style="{StaticResource FormComboBoxStyle}" />

                        <Label Content="文字色:" Style="{StaticResource FormLabelStyle}" />
                        <controls:ColorInputControl ColorText="{Binding HeadingTextColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    CommandParameter="HeadingTextColor"
                                                    SelectColorCommand="{Binding SelectColorCommand}" />

                        <Label Content="スタイル:" Style="{StaticResource FormLabelStyle}" />
                        <StackPanel Orientation="Horizontal">
                            <CheckBox Content="太字"
                                      IsChecked="{Binding IsHeadingBold, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                      Style="{StaticResource FormCheckBoxStyle}" />
                            <CheckBox Margin="10,5"
                                      Content="斜体"
                                      IsChecked="{Binding IsHeadingItalic, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                      Style="{StaticResource FormCheckBoxStyle}" />
                            <CheckBox Content="下線"
                                      IsChecked="{Binding IsHeadingUnderline, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                      Style="{StaticResource FormCheckBoxStyle}" />
                            <CheckBox Margin="10,5"
                                      Content="取り消し線"
                                      IsChecked="{Binding IsHeadingStrikethrough, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                      Style="{StaticResource FormCheckBoxStyle}" />
                        </StackPanel>

                        <Label Content="フォントサイズ:" Style="{StaticResource FormLabelStyle}" />
                        <controls:FontSizeEditorControl Unit="{Binding GlobalUnit}" Value="{Binding HeadingFontSize, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                        <Label Content="フォントファミリー:" Style="{StaticResource FormLabelStyle}" />
                        <TextBox Style="{StaticResource FormTextBoxStyle}" Text="{Binding HeadingFontFamily, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                        <CheckBox Content="項番の自動採番"
                                  IsChecked="{Binding IsHeadingNumberingEnabled, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                  Style="{StaticResource FormCheckBoxStyle}" />
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- List Tab -->
            <TabItem Header="リスト">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Style="{StaticResource FormContainerStyle}">
                        <Label Content="マーカーの種類 (ul):" Style="{StaticResource FormLabelStyle}" />
                        <ComboBox Style="{StaticResource FormComboBoxStyle}" Text="{Binding ListMarkerType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <ComboBoxItem Content="disc" />
                            <ComboBoxItem Content="circle" />
                            <ComboBoxItem Content="square" />
                        </ComboBox>

                        <Label Content="インデント:" Style="{StaticResource FormLabelStyle}" />
                        <controls:FontSizeEditorControl Unit="px" Value="{Binding ListIndent, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Table Tab -->
            <TabItem Header="表">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Style="{StaticResource FormContainerStyle}">
                        <Label Content="罫線 色:" Style="{StaticResource FormLabelStyle}" />
                        <controls:ColorInputControl ColorText="{Binding TableBorderColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    CommandParameter="TableBorderColor"
                                                    SelectColorCommand="{Binding SelectColorCommand}" />

                        <Label Content="罫線 太さ:" Style="{StaticResource FormLabelStyle}" />
                        <controls:FontSizeEditorControl Unit="px" Value="{Binding TableBorderWidth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                        <Label Content="ヘッダー背景色:" Style="{StaticResource FormLabelStyle}" />
                        <controls:ColorInputControl ColorText="{Binding TableHeaderBackgroundColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    CommandParameter="TableHeaderBackgroundColor"
                                                    SelectColorCommand="{Binding SelectColorCommand}" />

                        <Label Content="セル パディング:" Style="{StaticResource FormLabelStyle}" />
                        <controls:FontSizeEditorControl Unit="px" Value="{Binding TableCellPadding, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Code Tab -->
            <TabItem Header="コード">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Style="{StaticResource FormContainerStyle}">
                        <Label Content="文字色:" Style="{StaticResource FormLabelStyle}" />
                        <controls:ColorInputControl ColorText="{Binding CodeTextColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    CommandParameter="CodeTextColor"
                                                    SelectColorCommand="{Binding SelectColorCommand}" />

                        <Label Content="背景色:" Style="{StaticResource FormLabelStyle}" />
                        <controls:ColorInputControl ColorText="{Binding CodeBackgroundColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    CommandParameter="CodeBackgroundColor"
                                                    SelectColorCommand="{Binding SelectColorCommand}" />

                        <Label Content="フォントファミリー:" Style="{StaticResource FormLabelStyle}" />
                        <TextBox Style="{StaticResource FormTextBoxStyle}" Text="{Binding CodeFontFamily, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Quote Tab -->
            <TabItem Header="引用">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Style="{StaticResource FormContainerStyle}">
                        <Label Content="文字色:" Style="{StaticResource FormLabelStyle}" />
                        <controls:ColorInputControl ColorText="{Binding QuoteTextColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    CommandParameter="QuoteTextColor"
                                                    SelectColorCommand="{Binding SelectColorCommand}" />

                        <Label Content="背景色:" Style="{StaticResource FormLabelStyle}" />
                        <controls:ColorInputControl ColorText="{Binding QuoteBackgroundColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    CommandParameter="QuoteBackgroundColor"
                                                    SelectColorCommand="{Binding SelectColorCommand}" />

                        <Label Content="左枠線 色:" Style="{StaticResource FormLabelStyle}" />
                        <controls:ColorInputControl ColorText="{Binding QuoteBorderColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    CommandParameter="QuoteBorderColor"
                                                    SelectColorCommand="{Binding SelectColorCommand}" />

                        <Label Content="左枠線 太さ:" Style="{StaticResource FormLabelStyle}" />
                        <controls:FontSizeEditorControl Unit="px" Value="{Binding QuoteBorderWidth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                        <Label Content="左枠線 種類:" Style="{StaticResource FormLabelStyle}" />
                        <ComboBox Style="{StaticResource FormComboBoxStyle}" Text="{Binding QuoteBorderStyle, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <ComboBoxItem Content="solid" />
                            <ComboBoxItem Content="dotted" />
                            <ComboBoxItem Content="dashed" />
                        </ComboBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>
