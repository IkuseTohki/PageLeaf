# PageLeaf 使い方ガイド 🍃

PageLeaf へようこそ！
このガイドでは、PageLeaf を使って Markdown ドキュメントを作成し、自分好みのスタイル（CSS）を適用・カスタマイズする方法を説明します。

---

## 1. 基本的な操作

### Markdown ファイルを開く・保存する

- **新規作成**: `Ctrl + N` またはメニューの「ファイル > 新規作成」
- **開く**: `Ctrl + O` またはメニューの「ファイル > 開く」
- **保存**: `Ctrl + S` またはメニューの「ファイル > 保存」

### 表示モードの切り替え

画面右上のフローティングボタン、またはショートカットキーを使ってモードを切り替えます。

- **ショートカット**: `Alt + Shift + ← / →`
- **フローティングボタン**:
  - 👁 **ビューアーモード**: CSS が適用された最終的な見た目を確認できます。
  - 🖋 **Markdown 編集モード**: Markdown の記号を含めたテキスト編集に集中できます。

---

## 2. 目次 (TOC) 機能 📑

画面右上の目次ボタン（リストアイコン）をクリックすると、現在のドキュメントの目次が表示されます。

- **クイックジャンプ**: 目次内の見出しをクリックすると、その場所へ即座に移動します。
- **両モード対応**: 編集モードでは該当する行へ、ビューアーモードでは該当するセクションへジャンプします。

---

## 3. デザイン（CSS）をカスタマイズする

PageLeaf の最大の特徴は、GUI を使って Markdown の見た目を自由に変更できることです。

### CSS エディターを開く

画面右端にある境界線のつまみ（◀）をクリックすると、**CSS 編集パネル**が開きます。

### スタイルの選択

パネルの上部にあるドロップダウンメニューから、編集・適用したい CSS ファイルを選択できます。

- **新しいスタイルを作成する**: ドロップダウンの一番下にある **「(新規作成...)」** を選択します。

### スタイルを編集・保存する

パネル内の各タブを使って見た目を調整します。

- **タイトル**: フロントマターの `title` が表示されている場合、そのフォント、色、中央寄せ、下余白などを個別に設定できます。
- **全体**: 文面全体の基本フォントサイズや文字色、背景色を設定します。
- **見出し**: H1〜H6 の各レベルごとにスタイルを設定できます。項番の自動採番（1.1.1 形式など）の ON/OFF もここで行います。
- **色を変える**: カラーピッカーを使って直感的に色を選択できます。
- **反映**: 編集内容はビューアーモードにリアルタイムで反映されます。
- **保存**: パネル上部の保存ボタンをクリックすると、選択中の CSS ファイルに上書き保存されます。

---

## 4. 便利な機能

### 画像の貼り付け (`Ctrl + Shift + V`)

スクリーンショットや画像をコピーした状態で `Ctrl + Shift + V` を押すと：

1. 画像を自動的にファイルとして保存します。
2. Markdown 内に `![image](images/...)` というリンクを即座に挿入します。
   ※ 保存先は「設定」画面から変更可能です。

### 編集支援

- **オートリスト**: リスト（`*` や `1.`）の行で改行すると、次の行にも自動で記号が挿入されます。
- **記号の補完**: `(` や `[` を入力すると、自動的に閉じ記号 `)` や `]` が挿入されます。
- **改ページの挿入**: `Shift + Enter` を押すと、カーソル位置に強制改ページ用のタグを挿入します。これは印刷時に効果を発揮します。

---

## 5. ショートカットキー一覧

| キー               | 動作                          |
| :----------------- | :---------------------------- |
| `Alt+Shift + ←/→`  | モード切替 (編集/閲覧)        |
| `Ctrl + N`         | 新規作成                      |
| `Ctrl + O`         | ファイルを開く                |
| `Ctrl + S`         | 保存                          |
| `Ctrl + Shift + S` | 名前を付けて保存              |
| `Ctrl + Shift + V` | 画像を貼り付け                |
| `Shift + Enter`    | 改ページ挿入                  |
| `Ctrl + B`         | 太字 (選択範囲を `**` で囲む) |
| `Ctrl + I`         | 斜体 (選択範囲を `*` で囲む)  |
| `Ctrl + K`         | リンク挿入                    |

---

## 6. 困ったときは

### スタイルが崩れてしまった

CSS 編集パネルの上部にある「リセット」ボタン（回転矢印アイコン）を押すと、最後に保存した状態まで戻すことができます。

### アプリの設定を変えたい

メニューの「設定 > 設定」から、以下の項目などを変更できます。

- **エディタ**:
  - **フォントサイズ**: エディタ（編集モード）の文字の大きさを指定します。
  - **インデント設定**: インデント幅やスペースの使用。
  - **タイトル表示設定**: フロントマターの `title` をプレビューの最上部に表示するかどうか。
  - **新規作成時のフロントマター自動挿入**: ON/OFF の切り替え。
- **画像・ファイル**: 画像貼り付け時の保存先フォルダやファイル名の命名規則。
- **表示 (コード)**: コードブロックのハイライトテーマや、CSS エディタ設定による上書きの有効化。ライブラリ（Highlight.js / Mermaid）の読み込み先設定。

### ライブラリ読み込み先の選択

「設定 > 表示 (コード)」から、プレビュー表示に使用する外部ライブラリの取得先を切り替えられます。

- **ローカル**: アプリケーションに同梱されているファイルを使用します。オフライン環境でも正常に動作します。
- **CDN**: インターネット上の CDN (jsDelivr 等) から最新のライブラリを取得します。常に最新の機能や修正を利用できますが、インターネット接続が必要です。

---

## 7. フロントマターによる設定 ⚙️

Markdown ファイルの先頭に YAML 形式のメタデータ（フロントマター）を記述することで、そのファイル専用の設定を指定できます。

```yaml
---
title: ドキュメントのタイトル
css: report.css
syntax_highlight: github
---
```

### 指定可能なプロパティ

- **`title`**: 文書のタイトルを指定します。設定で「フロントマターのタイトルを表示する」が ON の場合、プレビューの最上部に表示されます。
  - 値が空の場合は表示されません。
  - フロントマター編集パネルでは、未入力時に `(タイトル未設定)` と表示されます。
- **`css`**: そのファイルを開いた際に自動的に適用する CSS ファイル名を指定します。
  - 例: `css: my-style.css`
  - 拡張子 `.css` は省略可能です。
- **`syntax_highlight`**: コードブロックのハイライトテーマを指定します。アプリ全体の「設定」よりも優先されます。
  - 例: `syntax_highlight: monokai`
  - 指定されたテーマファイルがアプリ内に存在する場合に適用されます。

フロントマターの各項目は、画面右側の「フロントマター編集パネル」からも確認・編集が可能です。
`title` を編集すると、プレビュー上のタイトルもリアルタイムに更新されます。

### 新規作成時の自動挿入

「設定」画面から、新規ファイル作成時にフロントマターを自動的に挿入するように設定できます。

- **標準プロパティ**: `title`, `created`, `updated`, `css`, `syntax_highlight` が自動でセットされます。
- **追加プロパティ**: ユーザーが独自に定義したプロパティを追加で挿入できます。
- **プレースホルダーの利用**: プロパティの初期値には、以下の変数を使用できます。
  - `{Now}` : 現在日時 (例: `2026-01-17 12:34:56`)
  - `{Date}` : 現在日付 (例: `2026-01-17`)
  - `{Time}` : 現在時刻 (例: `12:34:56`)
