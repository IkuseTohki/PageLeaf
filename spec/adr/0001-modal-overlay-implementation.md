# ADR 0001: モーダル表示時のメインウィンドウ制御

## ステータス

承認済み

## コンテキスト

設定画面やダイアログなどのモーダルウィンドウを表示している際、メインウィンドウが操作不能であることを視覚的に示し、ユーザーの注意をモーダルに集中させる必要がある。

## 検討された案

| 案                      | 視覚効果                                         | メリット（利点）                                                                              | デメリット（欠点）                                                                                |
| :---------------------- | :----------------------------------------------- | :-------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------ |
| **1. シャドウ（採用）** | 背景が半透明の黒で覆われ、手前の画面が浮き上がる | ・操作不能が直感的に伝わる<br>・WPFでの描画負荷が非常に低い<br>・視線が自然に中央へ誘導される | ・静的な表示のみだと、やや古く感じることがある（アニメーションで補完可能）                        |
| **2. ブラー（ぼかし）** | すりガラスのように背景の文字が滲んで見えなくなる | ・デザイン性が高くモダンな印象<br>・情報のノイズを大幅に軽減できる                            | ・WPFでは**計算負荷が高く、高解像度で動作が重くなる**<br>・文字が滲むため不快感を感じる場合がある |
| **3. グレースケール**   | 背景の彩度がなくなり、モノクロの状態になる       | ・手前の色付きウィンドウが際立つ<br>・「凍結」状態を強く印象付ける                            | ・システムエラーやクラッシュのようなネガティブな印象を与える可能性がある                          |

## 決定事項

「案1：シャドウ・オーバーレイ」を採用する。さらに、UX向上のため「フェードアニメーション」を組み合わせて実装する。

## 理由

- **パフォーマンス**: WPFにおいてBlurEffect（ぼかし）は高解像度環境での描画遅延の原因となるリスクがあるが、半透明レイヤーは極めて軽量であり、低スペックPCでも快適に動作する。
- **視認性**: ブラーに比べ、背景の要素をうっすら認識させつつ「操作できない」ことを明確に伝えられるバランスが良い。
- **実装の容易性**: Behaviorとデータバインディングの組み合わせで、既存のMVVMアーキテクチャにもっともクリーンに統合できる。
