# ADR 0004: CSS編集パネルにおけるセクション定義と項目整理の指針

## ステータス

承認済み (Accepted)

## コンテキスト

CSS編集パネルの各タブ内において、設定項目が「カラー設定」などのプロパティの種類によってグループ化されていた。これにより、文字色と背景色が同じセクションに混在したり、特定の要素のスタイル（例：文字の太さと色）が離れた場所に配置されるなど、直感的な操作を妨げていた。

## 決定事項

設定項目のグループ化（セクション定義）において、以下の指針を採用する。

### 1. 「属性」ではなく「役割」によるグループ化

「カラー設定」や「数値設定」といった属性別のセクションを廃止し、その項目が何に寄与するかという「役割」に基づいてセクションを定義する。

- **文字スタイル (Typography)**: フォント、サイズ、スタイル（太字/斜体）、文字色、行間、位置揃えなど、テキストの可読性と外観に関する項目。
- **装飾・ボックス (Decoration / Box)**: 背景色、枠線（色・太さ・種類）、角丸、マーカー、アイコン表示など、要素自体の装飾に関する項目。
- **レイアウト・余白 (Layout / Spacing)**: マージン、パディング、幅、インデントなど、空間配置に関する項目。

### 2. 並び順の標準化

原則として「文字スタイル → 装飾・ボックス → レイアウト・余白」の順で配置し、ユーザーが「中身から外側へ」と意識を移動させながら設定できるようにする。

### 3. 特徴的な要素の優先

要素固有の重要な設定（見出しのレベル選択や、リストのマーカー選択、コードの上書き設定など）は、タブの最上部に配置し、設定の対象やモードを明確にする。

## 理由

- **直感性**: ユーザーは「文字を赤くしたい」と考えたとき、色の種類を探すのではなく、文字に関する設定項目群を探すため。
- **拡張性**: 今後新しいプロパティ（角丸やマージン等）を追加する際、追加先が「属性」ではなく「役割」で明確になっているため、UIの迷走を防げる。
- **一貫性**: 全タブで同じ論理構成（文字→装飾→余白）を維持することで、学習コストを下げられる。

## 影響範囲

- `CssEditorView.xaml` の各タブ内のコントロール配置と `Label` (セクションヘッダー) の修正。
- 一部のプロパティの移動に伴う、表示・非表示の連動ロジックの確認。
