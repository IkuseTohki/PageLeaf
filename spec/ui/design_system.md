# UI デザインシステム & 実装規約

## 1. カラーシステム

### 1.1. テーマ管理

本アプリはライトテーマとダークテーマをサポートする。すべての色は `DynamicResource` を介して参照し、実行時に動的に切り替わるように実装するものとする。

### 1.2. アクセントカラー

主要なアクションや選択状態を示すために、以下のカラーを使用する。

- **PrimaryActionColor**: 青系統（ライト: `#0078D4` / ダーク: `#0091FF`）

---

## 2. インタラクション・スタイル (Soft Emphasis)

ユーザーの操作に対する状態（ホバー、選択）の表現ルールを定める。

### 2.1. 選択状態 (Selected State)

「強い枠線」による表現を避け、背景の塗りつぶしとシンボル色の変化によって状態を表現する。

- **背景色 (`IconButtonSelectedBackgroundBrush`)**: アクセントカラーをベースとした低不透明度背景（ライト: 15% / ダーク: 35%）を適用する
- **シンボル/文字色 (`IconButtonSelectedIconBrush`)**: アクセントカラー 100% とする
- **枠線 (Border)**: 原則として非表示 (`BorderThickness="0"`) とする

### 2.2. ホバー状態 (Hover State)

マウスポインターが要素上に位置していることを示し、その要素がインタラクティブ（クリック可能）であることをユーザーに直感的に伝える。強いコントラストの変化を避け、控えめな背景色の変化によって「選択の予兆」を表現するものとする。

- **背景色**: グレー系統の低不透明度背景 (`ButtonHoverBackgroundBrush`) を適用し、要素の形状を微かに浮き上がらせる

---

## 3. コンポーネント実装規約

### 3.1. アイコンボタン (ToggleButton / ListBoxItem)

ツールバーのボタンやリストのマーカー選択など、すべての「選択可能なアイコン要素」に Soft Emphasis ルールを一貫して適用する。実装には `IconToggleButtonStyle` または `ListMarkerListBoxItemStyle` を使用するものとする。

### 3.2. フォーム・コントロール

WPF の標準 ComboBox は、システムカラーや親要素の設定を継承しやすく、テーマ切り替え時に文字が背景に埋もれるなどの視認性低下を招く恐れがある。このリスクを排除するため、以下の規則を遵守するものとする。

- **文字色の動的切り替え**: 文字色（`Foreground`）には常に `PrimaryTextBrush` を指定し、ライト/ダーク各テーマの変更に合わせて文字色が即座に反転するように制御する

- **明示的なスタイル定義**: `ComboBox` および `ComboBoxItem` の双方において、コントロールのデフォルト値に依存せず、スタイル内で背景色と文字色を `DynamicResource` により明示的に定義する

---

## 4. 禁止事項 (Forbidden Matters)

保守性と一貫性を損なう以下の実装を禁止する。

- **色のハードコード**: XAML 内への直接的なカラーコード記述を禁止し、必ず `DynamicResource` を使用すること
- **View 内での色決定**: DataTrigger 等による Style 内での制御を徹底し、`Path.Fill` 等を個別の View で固定しないこと
- **不透明度のマジックナンバー**: コードビハインドでの計算を避け、カラーリソースファイルでブラシとして定義すること
