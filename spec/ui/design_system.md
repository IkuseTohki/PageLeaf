# UI デザインシステム & 実装規約

## 1. カラーシステム

### 1.1. テーマ管理

本アプリはライトテーマとダークテーマをサポートする。すべての色は `DynamicResource` を介して参照し、実行時に動的に切り替わるように実装しなければならない。

### 1.2. アクセントカラー

主要なアクションや選択状態を示すために使用する。

- **PrimaryActionColor**: 青系統（ライト: `#0078D4` / ダーク: `#0091FF`）

---

## 2. インタラクション・スタイル (Soft Emphasis)

ユーザーの操作に対する状態（ホバー、選択）の表現に関するルール。

### 2.1. 選択状態 (Selected State)

「強い枠線」による表現を避け、背景の塗りつぶしとシンボル色の変化によって表現する。

- **背景色 (`IconButtonSelectedBackgroundBrush`)**:
  - アクセントカラーをベースとした低不透明度の背景を使用する。
  - **ライトテーマ**: 不透明度 15% (`#26`)
  - **ダークテーマ**: 不透明度 35% (`#59`)
- **シンボル/文字色 (`IconButtonSelectedIconBrush`)**:
  - アクセントカラー 100% を使用する。
- **枠線 (Border)**:
  - 原則として非表示 (`BorderThickness="0"`) とする。

### 2.2. ホバー状態 (Hover State)

- **背景色**: グレー系統の低不透明度背景 (`ButtonHoverBackgroundBrush`) を使用する。

---

## 3. コンポーネント実装規約

### 3.1. アイコンボタン (ToggleButton / ListBoxItem)

- **一貫性**: ツールバーのボタン、配置揃えのトグル、リストのマーカー選択など、すべての「選択可能なアイコン要素」はこの Soft Emphasis ルールを適用する。
- **実装方法**: `IconToggleButtonStyle` または `ListMarkerListBoxItemStyle` を使用する。

### 3.2. フォーム・コントロール

- **ComboBox / ComboBoxItem**:
  - 文字色は常に `PrimaryTextBrush` を基本とし、テーマ切り替え時に反転するように実装する。
  - 非選択時の文字色が背景に埋もれないよう、スタイル内で明示的に `Foreground` を定義する。

---

## 4. 禁止事項 (Forbidden Matters)

- **色のハードコード禁止**: `Fill="#333333"` のように、XAML 内に直接カラーコードを記述してはならない。必ず `DynamicResource` を使用する。
- **View 内での色決定禁止**: `Path.Fill` 等を個別の View 側で固定してはならない。選択状態による色の変化は、`Style` の `Trigger` または `DataTrigger` 内で制御すること。
- **不透明度のマジックナンバー禁止**: コードビハインド等で不透明度を計算せず、各テーマのカラーリソースファイルでブラシとして定義すること。
